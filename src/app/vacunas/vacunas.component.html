<h3>Registrar Vacuna</h3>

<!-- Formulario para crear o actualizar una vacuna -->
<form (ngSubmit)="guardarVacuna()">

  <!-- ğŸ“Œ Campo: Nombre de la vacuna -->
  <div>
    <label for="nombre">Nombre de la vacuna:</label>
    <input type="text" id="nombre" [(ngModel)]="nuevaVacuna.nombre" name="nombre" required>
  </div>

  <!-- ğŸ“† Fecha de aplicaciÃ³n -->
  <div>
    <label for="fecha_aplicacion">Fecha de aplicaciÃ³n:</label>
    <input type="date" id="fecha_aplicacion" [(ngModel)]="nuevaVacuna.fecha_aplicacion" name="fecha_aplicacion" required>
  </div>

  <!-- ğŸ“… Campo: PrÃ³xima dosis (equivale al campo `proxima_dosis` en la BD) -->
  <div>
    <label for="proxima_dosis">PrÃ³xima dosis:</label>
    <input type="date" id="proxima_dosis" [(ngModel)]="nuevaVacuna.proxima_dosis" name="proxima_dosis">
  </div>

  <!-- ğŸ”¢ Campo: Lote de la vacuna -->
  <div>
    <label for="lote">Lote:</label>
    <input type="text" id="lote" [(ngModel)]="nuevaVacuna.lote" name="lote">
  </div>

  <!-- ğŸ“ Campo: Observaciones adicionales -->
  <div>
    <label for="observaciones">Observaciones:</label>
    <textarea id="observaciones" [(ngModel)]="nuevaVacuna.observaciones" name="observaciones"></textarea>
  </div>

 <!-- ğŸ¾ ID de la mascota -->
  <div>
    <label for="mascota_id">ID de la mascota:</label>
    <input
      type="text"
      id="mascota_id"
      [(ngModel)]="nuevaVacuna.mascota_id"
      name="mascota_id"
      [readonly]="desdeHistorial"
      required
    >
  </div>
  <div *ngIf="desdeHistorial" style="font-style: italic; color: gray;">
    * Campo bloqueado porque vienes desde historial mÃ©dico.
  </div>


  <!-- ğŸ’¾ BotÃ³n para guardar -->
  <button class="btn teal" type="submit">{{ modoEdicion ? 'Actualizar Vacuna' : 'Guardar Vacuna' }}</button>
  
  <!-- âŒ BotÃ³n para cancelar ediciÃ³n -->
  <button *ngIf="modoEdicion" type="button" (click)="cancelarEdicion()">Cancelar</button>
</form>

<!-- ğŸ“‹ Lista de vacunas registradas -->
<h3>Vacunas Registradas</h3>
<ul>
  <li *ngFor="let vacuna of vacunas">
    ğŸ“… <strong>{{ vacuna.fecha_aplicacion }}</strong> - ğŸ’‰ {{ vacuna.nombre }}
    (Mascota ID: {{ vacuna.mascota_id }})

    <!-- Mostrar detalles adicionales solo si existen -->
    <div *ngIf="vacuna.proxima_dosis">ğŸ“† PrÃ³xima dosis: {{ vacuna.proxima_dosis }}</div>
    <div *ngIf="vacuna.lote">ğŸ”¢ Lote: {{ vacuna.lote }}</div>
    <div *ngIf="vacuna.observaciones">ğŸ“ Observaciones: {{ vacuna.observaciones }}</div>

    <!-- âœï¸ BotÃ³n editar -->
    <button (click)="editarVacuna(vacuna)">âœï¸ Editar</button>

    <!-- ğŸ—‘ï¸ BotÃ³n eliminar -->
    <button class="btn red" (click)="eliminarVacuna(vacuna.id)">ğŸ—‘ Eliminar</button>
  </li>
</ul>
