<h2 class="section-title">📋 Registro de Mascota</h2>

<form (ngSubmit)="registrarMascota()" enctype="multipart/form-data" class="form-container">

  <!-- 🔍 Buscar Dueño -->
  <div class="input-field">
    <label for="buscarDueno">👤 Buscar dueño:</label>
    <input
      type="text"
      id="buscarDueno"
      [(ngModel)]="terminoBusqueda"
      (input)="buscarUsuarios()"
      name="buscarDueno"
      placeholder="Nombre o correo del dueño"
    />
    <ul *ngIf="resultadosBusqueda.length" class="owner-results">
      <li *ngFor="let usuario of resultadosBusqueda" (click)="seleccionarUsuario(usuario)">
        <span class="material-icons">person</span> {{ usuario.name }} - {{ usuario.email }}
      </li>
    </ul>
    <p *ngIf="usuarioSeleccionado">
      ✅ Dueño: <strong>{{ usuarioSeleccionado.name }}</strong> ({{ usuarioSeleccionado.email }})
    </p>
  </div>

  <!-- Campos básicos con íconos -->
  <div class="input-row">
    <label for="nombre"><span class="material-icons">pets</span> Nombre</label>
    <input type="text" id="nombre" [(ngModel)]="nombre" name="nombre" required />
  </div>

  <div class="input-row">
    <label for="especie"><span class="material-icons">category</span> Especie</label>
    <input type="text" id="especie" [(ngModel)]="especie" name="especie" required />
  </div>

  <div class="input-row">
    <label for="raza"><span class="material-icons">badge</span> Raza</label>
    <input type="text" id="raza" [(ngModel)]="raza" name="raza" />
  </div>

  <div class="input-row">
    <label for="edad"><span class="material-icons">calendar_today</span> Edad</label>
    <input type="number" id="edad" [(ngModel)]="edad" name="edad" min="0" />
  </div>

  <div class="input-row">
    <label for="sexo"><span class="material-icons">wc</span> Sexo</label>
    <select id="sexo" [(ngModel)]="sexo" name="sexo">
      <option value="">Selecciona</option>
      <option value="Macho">Macho</option>
      <option value="Hembra">Hembra</option>
    </select>
  </div>

  <div class="input-row">
    <label for="fechaNacimiento"><span class="material-icons">cake</span> Fecha de nacimiento</label>
    <input type="date" id="fechaNacimiento" [(ngModel)]="fechaNacimiento" name="fechaNacimiento" />
  </div>

  <div class="input-row">
    <label for="microchip"><span class="material-icons">confirmation_number</span> Microchip</label>
    <input type="text" id="microchip" [(ngModel)]="microchip" name="microchip" />
  </div>

  <div class="input-row">
    <label for="color"><span class="material-icons">palette</span> Color</label>
    <input type="text" id="color" [(ngModel)]="color" name="color" />
  </div>

  <div class="input-row">
    <label for="esterilizado"><span class="material-icons">healing</span> ¿Esterilizado?</label>
    <select [(ngModel)]="esterilizado" name="esterilizado">
      <option value="" disabled>Selecciona</option>
      <option [ngValue]="true">Sí</option>
      <option [ngValue]="false">No</option>
    </select>
  </div>

  <div class="input-row">
    <label for="descripcion"><span class="material-icons">notes</span> Descripción</label>
    <textarea id="descripcion" [(ngModel)]="descripcion" name="descripcion"></textarea>
  </div>

  <div class="input-row">
    <label for="foto"><span class="material-icons">photo_camera</span> Foto</label>
    <input type="file" id="foto" (change)="onFotoSeleccionada($event)" />
  </div>

  <div class="form-actions">
    <button type="submit" class="btn teal">✅ Registrar Mascota</button>
    
  </div>

</form>
