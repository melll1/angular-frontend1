<h2>Registro de Mascota</h2>

<form (ngSubmit)="registrarMascota()" enctype="multipart/form-data">

  <!-- üîç Buscador de due√±o -->
<div class="input-field">
  <label for="buscarDueno">Buscar due√±o:</label>
  <input
    type="text"
    id="buscarDueno"
    [(ngModel)]="terminoBusqueda"
    (input)="buscarUsuarios()"
    name="buscarDueno"
    autocomplete="off"
  />

  <!-- üßæ Lista de resultados -->
  <ul *ngIf="resultadosBusqueda.length > 0" class="collection">
    <li
      class="collection-item"
      *ngFor="let usuario of resultadosBusqueda"
      (click)="seleccionarUsuario(usuario)"
      style="cursor: pointer;"
    >
      {{ usuario.name }} - {{ usuario.email }}
    </li>
  </ul>

  <!-- ‚úÖ Usuario seleccionado -->
  <div *ngIf="usuarioSeleccionado">
    <p>Due√±o seleccionado: <strong>{{ usuarioSeleccionado.name }}</strong> ({{ usuarioSeleccionado.email }})</p>
  </div>
</div>

  <!-- Nombre -->
  <div>
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" [(ngModel)]="nombre" name="nombre" required />
    <div *ngIf="errores.nombre" style="color:red;">{{ errores.nombre }}</div>
  </div>

  <!-- Especie -->
  <div>
    <label for="especie">Especie:</label>
    <input type="text" id="especie" [(ngModel)]="especie" name="especie" required />
    <div *ngIf="errores.especie" style="color:red;">{{ errores.especie }}</div>
  </div>

  <!-- Raza -->
  <div>
    <label for="raza">Raza:</label>
    <input type="text" id="raza" [(ngModel)]="raza" name="raza" />
    <div *ngIf="errores.raza" style="color:red;">{{ errores.raza }}</div>
  </div>

  <!-- Edad (manual, en caso de no usar fecha nacimiento) -->
  <div>
    <label for="edad">Edad:</label>
    <input type="number" id="edad" [(ngModel)]="edad" name="edad" min="0" />
    <div *ngIf="errores.edad" style="color:red;">{{ errores.edad }}</div>
  </div>

  <!-- Sexo -->
  <div>
    <label for="sexo">Sexo:</label>
    <select id="sexo" [(ngModel)]="sexo" name="sexo">
      <option value="">Selecciona el sexo</option>
      <option value="Macho">Macho</option>
      <option value="Hembra">Hembra</option>
    </select>
    <div *ngIf="errores.sexo" style="color:red;">{{ errores.sexo }}</div>
  </div>

  <!-- Fecha de nacimiento -->
  <div>
    <label for="fechaNacimiento">Fecha de nacimiento:</label>
    <input type="date" id="fechaNacimiento" [(ngModel)]="fechaNacimiento" name="fechaNacimiento" />
    <div *ngIf="errores.fechaNacimiento" style="color:red;">{{ errores.fechaNacimiento }}</div>
  </div>

  <!-- N√∫mero de microchip -->
  <div>
    <label for="microchip">Microchip:</label>
    <input type="text" id="microchip" [(ngModel)]="microchip" name="microchip" />
    <div *ngIf="errores.microchip" style="color:red;">{{ errores.microchip }}</div>
  </div>

  <!-- Color del pelaje -->
  <div>
    <label for="color">Color:</label>
    <input type="text" id="color" [(ngModel)]="color" name="color" />
    <div *ngIf="errores.color" style="color:red;">{{ errores.color }}</div>
  </div>

  <!-- ¬øEsterilizado? -->
  <div>
  <label for="esterilizado">¬øEsterilizado?</label>
  <select [(ngModel)]="esterilizado" name="esterilizado" required>
    <option value="" disabled selected>Selecciona una opci√≥n</option>
    <option [ngValue]="true">S√≠</option>
    <option [ngValue]="false">No</option>
  </select>
  <div *ngIf="errores.esterilizado" style="color:red;">{{ errores.esterilizado }}</div>
</div>

  <!-- Descripci√≥n -->
  <div>
    <label for="descripcion">Descripci√≥n:</label>
    <textarea id="descripcion" [(ngModel)]="descripcion" name="descripcion"></textarea>
  </div>

  <!-- Foto -->
  <div>
    <label for="foto">Foto:</label>
    <input type="file" id="foto" (change)="onFotoSeleccionada($event)" />
    <div *ngIf="errores.foto" style="color:red;">{{ errores.foto }}</div>
  </div>

  <button class="btn teal" type="submit">Registrar Mascota</button>
  <button class="btn grey" type="button" (click)="volver()">Volver</button>

</form>
